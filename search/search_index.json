{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#lslhttpmessagehandlerscapturingdumps","title":"LSL.HttpMessageHandlers.Capturing.Dumps","text":"<p>This library provides quick and easy request and response dumping based on the LSL.HttpMessageHandlers.Capturing.Core library.</p>"},{"location":"#quick-start","title":"Quick Start","text":"<p>The following code illustrates the addition of request and response dumping to a user profile folder based on the executing assembly:</p> <p>NOTE: <code>services</code> is an <code>IServiceCollection</code> instance</p> <pre><code>services.AddHttpClient&lt;MyTestClient&gt;()            \n    .AddRequestAndResponseCapturing(c =&gt; c\n        .AddDumpCapturingHandlerWithDefaults()\n    );\n\n// On resolution of MyTestClient, all request and responses \n// will be dumped into the current user's profile folder under the path\n// .http-dumps/{executing-assembly-name}.\n// {executing-assembly-name} is resolved using Assembly.GetEntryAssembly().GetName().Name\n</code></pre> <p>The defaults are configured as follows (and can be augmented by any of the optional parameters for <code>AddDumpCapturingHandlerWithDefaults</code>):</p> <ul> <li>Adds the default dump capturer to output to the current user's profile folder under the <code>.http-dumps</code> folder and under a folder beneath that named after the executing assembly.</li> <li>Adds the default header capturer. It obfuscates the <code>Authorization</code> header on output</li> <li>Adds the query parameter obfuscator so that it obfuscates these parameters: <code>apikey</code>, <code>apiKey</code>, <code>api_key</code> and <code>api-key</code>.</li> </ul>"},{"location":"Default%20Overrides/01-overview/","title":"Overview of using defaults","text":"<p>When using <code>AddDumpCapturingHandlerWithDefaults</code> a number of optional configuration parameters are available to further configure the default.</p> <p>The sections here outline what each one does and any caveats around their use.</p>"},{"location":"Default%20Overrides/01-overview/#the-configurator-parameter","title":"The <code>configurator</code> parameter","text":"<p>This action is run before the defaults are added and allows for adding custom options via the <code>IDumpCapturerBuilder</code> interface and its associated extension methods.</p> <p>The following example shows the adding of a content type deserialiser for <code>HTML</code> content using a custom content type deserialiser:</p> <pre><code>services.AddHttpClient&lt;MyTestClient&gt;()            \n    .AddRequestAndResponseCapturing(c =&gt; c\n        .AddDumpCapturingHandlerWithDefaults(\n            configurator: c =&gt; c\n                .AddContentTypeBasedDeserialiser&lt;HtmlDeserialiser&gt;()\n        )\n    );\n</code></pre> <p>Info</p> <p>Because this is added before all the defaults it allows the <code>HtmlDeserialiser</code> to run before the default <code>TextSerialiser</code> which matches <code>text/*</code> content types.</p> <p>Warning</p> <p>This content type deserialiser is not part of the library and is only shown for illustrative purposes of execution order.</p> <p>The <code>DotNetFiddle</code> includes the implementation and will pretty-print the <code>HTML</code>.</p> <p>Under the hood, this deserialiser uses AngleSharp to prettify the <code>HTML</code> content.</p>"},{"location":"Default%20Overrides/01-overview/#the-defaultdumphandlerconfigurator-parameter","title":"The <code>defaultDumpHandlerConfigurator</code> parameter","text":"<p>This action will configure the <code>DefaultDumpHandler</code>'s options which allows for configuration of output folders, file name providers and the <code>JsonSerializerOptions</code> that are used to output the <code>JSON</code> request and response dump to a file.</p> <p>The following example shows the adding of a content type deserialiser for <code>HTML</code> content using a custom content type deserialiser:</p> <p>Warning</p> <p>This example intentionally uses the same filename for all requests. This should NOT be done in real scenarios as multiple threads may attempt to write to the same file, resulting in failure.</p> <pre><code>services\n    .AddHttpClient&lt;MyTestClient&gt;()\n    .AddRequestAndResponseCapturing(c =&gt; c\n        .AddDumpCapturingHandlerWithDefaults(\n            defaultDumpHandlerConfigurator: c =&gt; c.UseFilenameResolverDelegate(dump =&gt; \"my file\")\n        )\n    )\n</code></pre>"},{"location":"Default%20Overrides/01-overview/#the-defaultheadermapperconfigurator-parameter","title":"The <code>defaultHeaderMapperConfigurator</code> parameter","text":"<p>This action will configure the default header mapper's options. </p>"},{"location":"Default%20Overrides/01-overview/#the-queryparameterobfuscatinguritransformerconfigurator-parameter","title":"The <code>queryParameterObfuscatingUriTransformerConfigurator</code> parameter","text":"<p>This action allows for further configuration of the query parameter obfuscating <code>IUriTransformer</code></p>"}]}